(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{132:function(e,t){},155:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(76),s=a.n(c),l=(a(97),a(98),a(43)),u=a.n(l),o=a(167),i=a(77),m=a.n(i),d=function(e){return r.a.createElement("button",{className:[m.a.Btn,e.className].join(" "),onClick:e.onClick,type:e.type||null,disabled:e.disable},e.children)},f=a(48),p=a(8),g=a(44),h=a.n(g),E=a(18),_=a.n(E),b=a(5),v=a(29),j=a.n(v),O=function(e){return r.a.createElement(b.b,{to:e.to,className:_.a.Usr},r.a.createElement("div",{className:_.a.UsrPic},e.online?r.a.createElement("div",{className:_.a.UsrPicOnline}):null,r.a.createElement("img",{src:j.a,alt:"",className:_.a.UsrPic})),r.a.createElement("p",{className:_.a.UsrName},e.name))},x=a(79),C=a.n(x).a.connect("https://pacific-everglades-97653.herokuapp.com"),y=function(e){return C.emit("loggedIn",e)},N=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){C.on("userloggedin",(function(e){c(e)})),C.on("userloggedout",(function(e){c(e)}))}),[]),r.a.createElement("div",{className:h.a.Users},r.a.createElement("h2",{className:h.a.UsersTitle},"Users"),a.map((function(e){return r.a.createElement(O,{key:e.username,name:e.username,to:"/chat/".concat(e.username),online:e.online})})))},S=Object(n.createContext)({isDark:null,toggleTheme:function(){}}),U=function(e){var t=Object(n.useContext)(S),a=t.isDark,c=t.toggleTheme;return r.a.createElement(o.a,{container:!0,spacing:0,style:{overflow:"hidden"}},r.a.createElement(o.a,{item:!0,xs:2,className:u.a.Right},r.a.createElement(N,null),r.a.createElement(d,{className:u.a.ThemeBtn,onClick:c},a?r.a.createElement(f.a,null):r.a.createElement(f.b,null)," ",r.a.createElement("p",null,"Dark Mode"))),r.a.createElement(o.a,{item:!0,xs:10},e.children))},k=a(169),w=a(15),R=a(83),A=a.n(R),M=a(34),L=a.n(M),D=function(){var e=Object(w.h)().username;return r.a.createElement("div",{className:L.a.Header},r.a.createElement("img",{src:j.a,alt:e,className:L.a.HeaderImg}),r.a.createElement("p",{className:L.a.HeaderName},e))},P=a(90),H=a(84),T=a.n(H),I=a(19),B=a.n(I),q=function(e){var t=new Date(e.createdAt),a="".concat(t.getHours(),":").concat(t.getMinutes());return r.a.createElement("div",{className:[B.a.Container,"recevied"===e.type?B.a.Recevied:"sent"===e.type?B.a.Sent:null].join(" ")},r.a.createElement("p",{className:B.a.Msg},e.msg),r.a.createElement("p",{className:B.a.Date},a))},F=Object(n.createContext)({user:null,setUser:function(){}}),J=function(){var e=Object(n.useRef)(null),t=Object(n.useContext)(F).user,a=Object(w.h)().username,c=Object(n.useState)([]),s=Object(p.a)(c,2),l=s[0],u=s[1],o=Object(n.useState)(!0),i=Object(p.a)(o,2),m=i[0],d=i[1];return Object(n.useEffect)((function(){console.log(m),console.log(l)})),Object(n.useEffect)((function(){e.current.scrollTop=e.current.scrollHeight}),[l,m]),Object(n.useEffect)((function(){d(!0),C.emit("room",{curUser:t.username,chatWith:a}),C.on("getAllMsgs",(function(e){console.log("getAllMsgs"),u(e),d(!1)}))}),[t,a]),Object(n.useEffect)((function(){C.on("sendmsg",(function(e){return u((function(t){return[].concat(Object(P.a)(t),[e])}))}))}),[]),r.a.createElement("div",{className:T.a.Msgs,ref:e},m?r.a.createElement("h1",null,"Loading..."):l.map((function(e,a){return r.a.createElement(q,{key:"".concat(e.user,"-").concat(a),type:e.user===t.username?"sent":"recevied",createdAt:e.createdAt,msg:e.message})})))},K=a(35),Y=a.n(K),W=a(168),Q=a(85),V=function(e){var t=Object(n.useContext)(F).user,a=Object(w.h)().username,c=Object(n.useRef)(null),s=function(){if(""===c.current.value.trim())return c.current.value="";C.emit("sendmsg",{message:c.current.value,from:t.username,to:a}),c.current.value=""};return r.a.createElement("div",{className:Y.a.Send},r.a.createElement(W.a,{placeholder:"Type a message...",className:Y.a.SendTextarea,ref:c,onKeyDown:function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),s())}}),r.a.createElement(d,{className:Y.a.SendBtn,onClick:s},r.a.createElement(Q.a,null)))},X=function(){return r.a.createElement("div",{className:A.a.Chat},r.a.createElement(D,null),r.a.createElement(J,null),r.a.createElement(V,null))},G=a(24),z=a.n(G),Z=a(86),$=a.n(Z),ee=Object(n.forwardRef)((function(e,t){return r.a.createElement("input",{type:e.type||"text",placeholder:e.placeholder,className:[$.a.Input,e.className].join(" "),required:!0,ref:t})})),te=a(25),ae=a.n(te),ne=a(49),re=a(87),ce=a.n(re).a.create({baseURL:"https://pacific-everglades-97653.herokuapp.com/api/v1",withCredentials:!0}),se=a(88),le=a.n(se),ue=a(89),oe=a.n(ue),ie=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],r=t[1],c=Object(n.useContext)(F).setUser,s=Object(n.useState)(!1),l=Object(p.a)(s,2),u=l[0],o=l[1],i=Object(w.g)(),m=Object(n.useCallback)(i.push,[]),d=Object(n.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";c(e.data.data),y(e.data.data),o(!1),m(t)}),[c,m]);return{sendAuthReq:function(){var e=Object(ne.a)(ae.a.mark((function e(t,a){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(le()(a.email)&&oe()(a.password,{min:8})){e.next=2;break}return e.abrupt("return",r({message:"Try again with a valid values."}));case 2:if(!a.passwordConfirm||a.passwordConfirm===a.password){e.next=4;break}return e.abrupt("return",r({message:"Passwords does not match."}));case 4:return o(!0),e.prev=5,e.next=8,ce.post("/users".concat(t),a);case 8:n=e.sent,console.log(n.data.data),d(n),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),r(e.t0.response.data),o(!1);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,a){return e.apply(this,arguments)}}(),isLoading:u,error:a,getMe:Object(n.useCallback)(Object(ne.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,ce.get("/users/me");case 4:t=e.sent,d(t),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),r(!0),o(!1),m("/login");case 13:case"end":return e.stop()}}),e,null,[[1,8]])}))),[m,d])}},me=function(){var e=ie(),t=e.sendAuthReq,a=e.error,c=e.isLoading,s=Object(n.useRef)(null),l=Object(n.useRef)(null);return r.a.createElement("form",{className:z.a.Auth,onSubmit:function(e){return e.preventDefault(),t("/login",{email:s.current.value,password:l.current.value})}},r.a.createElement("h2",null,"Log in"),a?r.a.createElement("p",{className:z.a.AuthError},a.message):null,r.a.createElement(ee,{type:"email",placeholder:"Your E-mail",ref:s}),r.a.createElement(ee,{type:"password",placeholder:"Your Password",ref:l}),r.a.createElement(d,null,c?"Loading...":"Submit"),r.a.createElement(b.b,{to:"/signup"},"Create new account"))},de=function(){var e=ie(),t=e.sendAuthReq,a=e.error,c=e.isLoading,s=Object(n.useRef)(null),l=Object(n.useRef)(null),u=Object(n.useRef)(null),o=Object(n.useRef)(null);return r.a.createElement("form",{className:z.a.Auth,onSubmit:function(e){return e.preventDefault(),t("/login",{email:l.current.value,password:u.current.value})}},r.a.createElement("h2",null,"Sign up"),a?r.a.createElement("p",null,a.message):null,r.a.createElement(ee,{type:"email",placeholder:"Your Username",ref:s}),r.a.createElement(ee,{type:"email",placeholder:"Your Password",ref:l}),r.a.createElement(ee,{type:"email",placeholder:"Your E-mail",ref:l}),r.a.createElement(ee,{type:"password",placeholder:"Confirm Your Password",ref:o}),r.a.createElement(d,null,c?"Loading...":"Submit"),r.a.createElement(b.b,{to:"/login"},"Login to your account"))};var fe=function(){var e=Object(n.useContext)(S).isDark,t=Object(n.useContext)(F).user,a=ie().getMe;Object(n.useEffect)((function(){a()}),[a]);var c=r.a.createElement(U,null,r.a.createElement(w.d,null,r.a.createElement(w.b,{exact:!0,path:"/"},r.a.createElement("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement("h1",null,"Select User"))),r.a.createElement(w.b,{path:"/chat/:username"},r.a.createElement(X,null)),r.a.createElement(w.a,{to:"/"})));return t||(c=r.a.createElement("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(k.a,{fixed:!0,maxWidth:"sm"},r.a.createElement(w.d,null,r.a.createElement(w.b,{path:"/login"},r.a.createElement(me,null)),r.a.createElement(w.b,{path:"/signup"},r.a.createElement(de,null)),r.a.createElement(w.a,{to:"/login"}))))),r.a.createElement("div",{className:["App",e?"Dark":"Light"].join(" ")},c)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=function(e){var t=Object(n.useState)(null),a=Object(p.a)(t,2),c=a[0],s=a[1];return r.a.createElement(F.Provider,{value:{user:c,setUser:s}},e.children)},ge=function(e){var t=localStorage.getItem("isDark"),a=Object(n.useState)(!t||JSON.parse(t)),c=Object(p.a)(a,2),s=c[0],l=c[1];return r.a.createElement(S.Provider,{value:{isDark:s,toggleTheme:function(){return l((function(e){return localStorage.setItem("isDark",JSON.stringify(!e)),!e}))}}},e.children)},he=r.a.createElement(r.a.StrictMode,null,r.a.createElement(pe,null,r.a.createElement(ge,null,r.a.createElement(b.a,null,r.a.createElement(fe,null)))));s.a.render(he,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},18:function(e,t,a){e.exports={Usr:"User_Usr__28Qa6",UsrPic:"User_UsrPic__2pVRx",UsrPicOnline:"User_UsrPicOnline__bn7qp",UsrName:"User_UsrName__2RGVl"}},19:function(e,t,a){e.exports={Container:"ChatMessage_Container__1VooG",Msg:"ChatMessage_Msg__1tK6I",Recevied:"ChatMessage_Recevied__3v5xh",Sent:"ChatMessage_Sent__2PUXS",Date:"ChatMessage_Date__2Xn_D"}},24:function(e,t,a){e.exports={Auth:"Auth_Auth__2JUtz",AuthError:"Auth_AuthError__3iFnA"}},29:function(e,t,a){e.exports=a.p+"static/media/jeffrey_000.1dad94d1.png"},34:function(e,t,a){e.exports={Header:"Header_Header__3XyRK",HeaderImg:"Header_HeaderImg__15P5u",HeaderName:"Header_HeaderName__3WoJl"}},35:function(e,t,a){e.exports={Send:"ChattingSend_Send__vQKCQ",SendTextarea:"ChattingSend_SendTextarea__FcVk7",SendBtn:"ChattingSend_SendBtn__1qjSF"}},43:function(e,t,a){e.exports={Right:"Layout_Right__L_5F6",Left:"Layout_Left__2sFkq",ThemeBtn:"Layout_ThemeBtn__cZw9F"}},44:function(e,t,a){e.exports={Users:"Users_Users__3ER1L",UsersTitle:"Users_UsersTitle__rEKR0"}},77:function(e,t,a){e.exports={Btn:"Button_Btn__12Stv"}},83:function(e,t,a){e.exports={Chat:"Chatting_Chat__2uj_R",Error:"Chatting_Error__35LH7"}},84:function(e,t,a){e.exports={Msgs:"ChattingMessages_Msgs__2_dvQ"}},86:function(e,t,a){e.exports={Input:"Input_Input__17APN"}},92:function(e,t,a){e.exports=a(155)},97:function(e,t,a){},98:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.874dbfb7.chunk.js.map