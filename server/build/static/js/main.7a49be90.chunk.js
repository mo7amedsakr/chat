(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{129:function(e,t){},149:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(76),s=a.n(c),l=(a(94),a(95),a(36)),o=a.n(l),u=a(161),i=a(77),m=a.n(i),d=function(e){return r.a.createElement("button",{className:[m.a.Btn,e.className].join(" "),onClick:e.onClick,type:e.type||null,disabled:e.disable},e.children)},f=a(51),g=a(3),p=a(47),h=a.n(p),E=a(22),b=a.n(E),_=a(7),v=a(29),j=a.n(v),O=function(e){return r.a.createElement(_.b,{to:e.to,className:b.a.Usr},r.a.createElement("div",{className:b.a.UsrPic},e.online?r.a.createElement("div",{className:b.a.UsrPicOnline}):null,r.a.createElement("img",{src:j.a,alt:"",className:b.a.UsrPic})),r.a.createElement("p",{className:b.a.UsrName},e.name))},C=a(79),y=a.n(C).a.connect("http://127.0.0.1:4000"),x=function(e){return y.emit("loggedIn",e)},S=function(){var e=Object(n.useState)([]),t=Object(g.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){y.on("userloggedin",(function(e){c(e)})),y.on("userloggedout",(function(e){c(e)}))}),[]),r.a.createElement("div",{className:h.a.Users},r.a.createElement("h2",{className:h.a.UsersTitle},"Users"),a.map((function(e){return r.a.createElement(O,{key:e.username,name:e.username,to:"/chat/".concat(e.username),online:e.online})})))},N=Object(n.createContext)({isDark:null,toggleTheme:function(){}}),U=function(e){var t=Object(n.useContext)(N),a=t.isDark,c=t.toggleTheme;return r.a.createElement("div",{className:o.a.Layout},r.a.createElement(u.a,{container:!0,spacing:0},r.a.createElement(u.a,{item:!0,xs:2,className:o.a.Right},r.a.createElement(S,null),r.a.createElement(d,{className:o.a.ThemeBtn,onClick:c},a?r.a.createElement(f.a,null):r.a.createElement(f.b,null)," ",r.a.createElement("p",null,"Dark Mode"))),r.a.createElement(u.a,{item:!0,xs:10},e.children)))},w=a(18),k=a(83),L=a.n(k),M=a(37),A=a.n(M),P=function(){var e=Object(w.i)().username;return r.a.createElement("div",{className:A.a.Header},r.a.createElement("img",{src:j.a,alt:e,className:A.a.HeaderImg}),r.a.createElement("p",{className:A.a.HeaderName},e))},T=a(6),D=a(84),H=a.n(D),I=a(23),q=a.n(I),B=function(e){var t=new Date(e.createdAt),a="".concat(t.getHours(),":").concat(t.getMinutes());return r.a.createElement("div",{className:[q.a.Container,"recevied"===e.type?q.a.Recevied:"sent"===e.type?q.a.Sent:null].join(" ")},r.a.createElement("p",{className:q.a.Msg},e.msg),r.a.createElement("p",{className:q.a.Date},a))},Y=Object(n.createContext)({user:null,setUser:function(){}}),R=function(){var e=Object(n.useRef)(null),t=Object(n.useContext)(Y).user,a=Object(w.i)().username,c=Object(n.useState)([]),s=Object(g.a)(c,2),l=s[0],o=s[1],u=Object(n.useState)(!0),i=Object(g.a)(u,2),m=i[0],d=i[1];return Object(n.useEffect)((function(){console.log(m),console.log(l)})),Object(n.useEffect)((function(){e.current.scrollTop=e.current.scrollHeight}),[l,m]),Object(n.useEffect)((function(){d(!0),y.emit("room",{curUser:t.username,chatWith:a}),y.on("getAllMsgs",(function(e){console.log("getAllMsgs"),o(e),d(!1)}))}),[t,a]),Object(n.useEffect)((function(){y.on("sendmsg",(function(e){return o((function(t){return[].concat(Object(T.a)(t),[e])}))}))}),[]),r.a.createElement("div",{className:H.a.Msgs,ref:e},m?r.a.createElement("h1",null,"Loading..."):l.map((function(e,a){return r.a.createElement(B,{key:"".concat(e.user,"-").concat(a),type:e.user===t.username?"sent":"recevied",createdAt:e.createdAt,msg:e.message})})))},W=a(38),z=a.n(W),Z=a(162),J=a(85),K=function(e){var t=Object(n.useContext)(Y).user,a=Object(w.i)().username,c=Object(n.useState)(""),s=Object(g.a)(c,2),l=s[0],o=s[1],u=function(){if(""===l.trim())return o("");y.emit("sendmsg",{message:l,from:t.username,to:a}),o("")};return r.a.createElement("div",{className:z.a.Send},r.a.createElement(Z.a,{placeholder:"Type a message...",className:z.a.SendTextarea,value:l,onChange:function(e){return o(e.target.value)},onKeyDown:function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),u())}}),r.a.createElement(d,{className:z.a.SendBtn,onClick:u},r.a.createElement(J.a,null)))},Q=function(){return r.a.createElement("div",{className:L.a.Chat},r.a.createElement(P,null),r.a.createElement(R,null),r.a.createElement(K,null))},$=a(33),F=a.n($),X=a(86),V=a.n(X),G=function(e){return r.a.createElement("input",{type:e.type||"text",placeholder:e.placeholder,className:[V.a.Input,e.className].join(" "),onChange:e.onChange,required:!0,ref:e.reference,name:e.name})},ee=a(163),te=a(5),ae=a.n(te),ne=a(12),re=a(87),ce=a.n(re).a.create({baseURL:"http://127.0.0.1:4000/api/v1",withCredentials:!0}),se=function(){var e=Object(n.useState)(null),t=Object(g.a)(e,2),a=t[0],r=t[1],c=Object(n.useContext)(Y).setUser,s=Object(n.useState)(!1),l=Object(g.a)(s,2),o=l[0],u=l[1],i=Object(w.g)().push,m=Object(n.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";c(e.data.data),x(e.data.data),i(t)}),[c,i]);return{sendAuthReq:function(){var e=Object(ne.a)(ae.a.mark((function e(t,a){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,ce.post("/users/".concat(t),a);case 4:n=e.sent,m(n),u(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),r(e.t0.response.data),u(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}(),isLoading:o,error:a,getMe:Object(n.useCallback)(Object(ne.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.get("/users/me");case 3:t=e.sent,m(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),r(!0),i("/login");case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),[i,m])}},le=a(35),oe=function(){var e=Object(n.useState)(""),t=Object(g.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),l=Object(g.a)(s,2),o=l[0],u=l[1],i=se(),m=i.sendAuthReq,f=i.isLoading,p=i.error,h=Object(le.a)(),E=h.register,b=h.handleSubmit,v=h.errors;Object(n.useEffect)((function(){console.log(v)}),[v]);return r.a.createElement(ee.a,{maxWidth:"sm"},r.a.createElement("form",{className:F.a.Auth,onSubmit:b((function(){return m("/login",{email:a,password:o})}))},r.a.createElement("p",null,"Log in"),p?r.a.createElement("p",{style:{color:"#cc0000"}},p.message):null,r.a.createElement(G,{type:"email",placeholder:"Your E-mail",onChange:function(e){return c(e.target.value)},name:"Your E-mail",reference:E({required:!0,pattern:/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/i})}),r.a.createElement(G,{type:"password",placeholder:"Your Password",onChange:function(e){return u(e.target.value)},name:"Your Password",reference:E({required:!0,min:8})}),r.a.createElement(d,{type:"submit",disable:f},f?"Loading...":"Submit"),r.a.createElement(_.b,{to:"/signup"},"Create a new account")))},ue=function(){var e=Object(n.useState)(""),t=Object(g.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),l=Object(g.a)(s,2),o=l[0],u=l[1],i=Object(n.useState)(""),m=Object(g.a)(i,2),f=m[0],p=m[1],h=Object(n.useState)(""),E=Object(g.a)(h,2),b=E[0],v=E[1],j=se(),O=j.sendAuthReq,C=j.isLoading,y=j.error,x=Object(le.a)(),S=x.register,N=x.handleSubmit;return r.a.createElement(ee.a,{maxWidth:"sm"},r.a.createElement("form",{className:F.a.Auth,onSubmit:N((function(){return O("/signup",{username:a,email:o,password:f,passwordConfirm:b})}))},r.a.createElement("p",null,"Sign up"),y?r.a.createElement("p",{style:{color:"#cc0000"}},y.message):null,r.a.createElement(G,{type:"text",placeholder:"Your Username",onChange:function(e){return c(e.target.value)},reference:S({required:!0})}),r.a.createElement(G,{type:"email",placeholder:"Your E-mail",onChange:function(e){return u(e.target.value)},name:"Your E-mail",reference:S({required:!0,pattern:/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/i})}),r.a.createElement(G,{type:"password",placeholder:"Your Password",onChange:function(e){return p(e.target.value)},name:"Your Password",reference:S({required:!0,min:8})}),r.a.createElement(G,{type:"password",placeholder:"Confrim Your Password",onChange:function(e){return v(e.target.value)},name:"Confrim Your Password",reference:S({required:!0,min:8})}),r.a.createElement(d,{type:"submit",disable:C},C?"Loading...":"Submit"),r.a.createElement(_.b,{to:"/login"},"Login to your account"),r.a.createElement("p",{style:{fontSize:"1.3rem"}},"Create a dummy account with a valid values DON'T user your real data")))};var ie=function(){var e=Object(n.useContext)(Y).user,t=se(),a=t.getMe,c=t.error,s=Object(n.useContext)(N).isDark,l=Object(w.h)().pathname;Object(n.useEffect)((function(){a(l)}),[a]);var o=r.a.createElement(U,null,r.a.createElement(w.d,null,r.a.createElement(w.b,{exact:!0,path:"/"},r.a.createElement("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement("h1",null,"Select User"))),r.a.createElement(w.b,{path:"/chat/:username"},r.a.createElement(Q,null))));return e||(o=r.a.createElement("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"}},c?r.a.createElement(w.d,null,r.a.createElement(w.b,{path:"/login"},r.a.createElement(oe,null)),r.a.createElement(w.b,{path:"/signup"},r.a.createElement(ue,null)),r.a.createElement(w.a,{to:"/"})):r.a.createElement("h1",null,"Loading..."))),r.a.createElement("div",{className:["App",s?"Dark":"Light"].join(" ")},o)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=function(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),c=a[0],s=a[1];return r.a.createElement(Y.Provider,{value:{user:c,setUser:s}},e.children)},de=function(e){var t=localStorage.getItem("isDark"),a=Object(n.useState)(!t||JSON.parse(t)),c=Object(g.a)(a,2),s=c[0],l=c[1];return r.a.createElement(N.Provider,{value:{isDark:s,toggleTheme:function(){return l((function(e){return localStorage.setItem("isDark",JSON.stringify(!e)),!e}))}}},e.children)},fe=r.a.createElement(r.a.StrictMode,null,r.a.createElement(me,null,r.a.createElement(de,null,r.a.createElement(_.a,null,r.a.createElement(ie,null)))));s.a.render(fe,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},22:function(e,t,a){e.exports={Usr:"User_Usr__2ONx8",UsrPic:"User_UsrPic__2gE94",UsrPicOnline:"User_UsrPicOnline__27DWs",UsrName:"User_UsrName__3IkUZ"}},23:function(e,t,a){e.exports={Container:"ChatMessage_Container__2Cnpz",Msg:"ChatMessage_Msg__kFxk5",Recevied:"ChatMessage_Recevied__1YT_Q",Sent:"ChatMessage_Sent__3tWZH",Date:"ChatMessage_Date__1qCTj"}},29:function(e,t,a){e.exports=a.p+"static/media/jeffrey_000.1dad94d1.png"},33:function(e,t,a){e.exports={Auth:"Auth_Auth__3aB5K"}},36:function(e,t,a){e.exports={Layout:"Layout_Layout__2ugx7",Right:"Layout_Right__1Quyd",Left:"Layout_Left__1TEt3",ThemeBtn:"Layout_ThemeBtn__1-Pzz"}},37:function(e,t,a){e.exports={Header:"Header_Header__2W_-S",HeaderImg:"Header_HeaderImg__XxUoO",HeaderName:"Header_HeaderName__1tDVR"}},38:function(e,t,a){e.exports={Send:"ChattingSend_Send__CJ-Ny",SendTextarea:"ChattingSend_SendTextarea__1lYt8",SendBtn:"ChattingSend_SendBtn__2L8xx"}},47:function(e,t,a){e.exports={Users:"Users_Users__209Fa",UsersTitle:"Users_UsersTitle__20rPy"}},77:function(e,t,a){e.exports={Btn:"Button_Btn__3vq0b"}},83:function(e,t,a){e.exports={Chat:"Chatting_Chat__1i6W-",Error:"Chatting_Error__3Qj7P"}},84:function(e,t,a){e.exports={Msgs:"ChattingMessages_Msgs__3X1xr"}},86:function(e,t,a){e.exports={Input:"Input_Input__cbq6C"}},89:function(e,t,a){e.exports=a(149)},94:function(e,t,a){},95:function(e,t,a){}},[[89,1,2]]]);
//# sourceMappingURL=main.7a49be90.chunk.js.map